"use strict";(self.webpackChunkjournalmytrade=self.webpackChunkjournalmytrade||[]).push([[402],{6604:function(e,t,n){n.d(t,{G:function(){return o}});var a=n(7853),i=n(4531),r=function(){function e(t,n){(0,a.Z)(this,e),Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_point",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_x1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_t0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tension",{enumerable:!0,configurable:!0,writable:!0,value:0}),this._context=t,this._tension=n}return(0,i.Z)(e,[{key:"areaStart",value:function(){this._line=0}},{key:"areaEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}},{key:"lineEnd",value:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:c(this,this._t0,u(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}},{key:"point",value:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,c(this,u(this,n=l(this,e,t)),n);break;default:c(this,this._t0,n=l(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}}]),e}();function o(e){return function(t){return new r(t,e)}}function s(e){return e<0?-1:1}function l(e,t,n){var a=e._x1-e._x0,i=t-e._x1,r=(e._y1-e._y0)/(a||i<0&&-0),o=(n-e._y1)/(i||a<0&&-0),l=(r*i+o*a)/(a+i);return(s(r)+s(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(l))||0}function u(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function c(e,t,n){var a=e._x0,i=e._y0,r=e._x1,o=e._y1,s=(r-a)/1.5*(1-e._tension);e._context.bezierCurveTo(a+s,i+s*t,r-s,o-s*n,r,o)}},7820:function(e,t,n){n.d(t,{$:function(){return o}});var a=n(7853),i=n(4531),r=function(){function e(t,n){(0,a.Z)(this,e),Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_point",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_x1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_t0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tension",{enumerable:!0,configurable:!0,writable:!0,value:0}),this._context=t,this._tension=n}return(0,i.Z)(e,[{key:"areaStart",value:function(){this._line=0}},{key:"areaEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}},{key:"lineEnd",value:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:c(this,this._t0,u(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}},{key:"point",value:function(e,t){var n=[t,e],a=NaN;if(t=+(t=n[1]),(e=+(e=n[0]))!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,c(this,u(this,a=l(this,e,t)),a);break;default:c(this,this._t0,a=l(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}}]),e}();function o(e){function t(t){return new r(t,e)}return t.tension=function(e){return o(+e)},t}function s(e){return e<0?-1:1}function l(e,t,n){var a=e._x1-e._x0,i=t-e._x1,r=(e._y1-e._y0)/(a||i<0&&-0),o=(n-e._y1)/(i||a<0&&-0),l=(r*i+o*a)/(a+i);return(s(r)+s(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(l))||0}function u(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function c(e,t,n){var a=e._x0,i=e._y0,r=e._x1,o=e._y1,s=(r-a)/1.5*(1-e._tension);e._context.bezierCurveTo(i+s*t,a+s,o-s*n,r-s,o,r)}},1856:function(e,t,n){n.d(t,{p:function(){return c}});var a=n(7853),i=n(4531),r=n(4474),o=n(3538),s=n(1020),l=n(8334),u=n(8505),c=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"_afterNew",value:function(){(0,r.Z)((0,o.Z)(n.prototype),"_afterNewApplyThemes",this).call(this)}},{key:"getFill",value:function(e){return{addColorStop:function(e,t){}}}},{key:"_changed",value:function(){(0,r.Z)((0,o.Z)(n.prototype),"_changed",this).call(this)}},{key:"getBounds",value:function(e){var t=this.get("target");if(t){var n=t.globalBounds(),a=e.toLocal({x:n.left,y:n.top}),i=e.toLocal({x:n.right,y:n.top}),r=e.toLocal({x:n.right,y:n.bottom}),o=e.toLocal({x:n.left,y:n.bottom});return{left:Math.min(a.x,i.x,r.x,o.x),top:Math.min(a.y,i.y,r.y,o.y),right:Math.max(a.x,i.x,r.x,o.x),bottom:Math.max(a.y,i.y,r.y,o.y)}}return e._display.getLocalBounds()}}]),n}(u.JH);Object.defineProperty(c,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Gradient"}),Object.defineProperty(c,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.JH.classNames.concat([c.className])})},4012:function(e,t,n){n.d(t,{o:function(){return f}});var a=n(7853),i=n(4531),r=n(1020),o=n(8334),s=n(1856),l=n(6817),u=n(4921),c=n(6683),h=n(3661),f=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"getFill",value:function(e){var t=this.get("rotation",0),n=this.getBounds(e),a=n.left||0,i=n.right||0,r=n.top||0,o=n.bottom||0,s=h.mC(t),f=h.O$(t),d=s*(i-a),g=f*(o-r),v=Math.max(d,g),y=this._root._renderer.createLinearGradient(a,r,a+v*s,r+v*f),p=this.get("stops");if(p){var b=0;u.S6(p,(function(e){var t=e.offset;c.hj(t)||(t=b/(p.length-1));var n=e.opacity;c.hj(n)||(n=1);var a=e.color;if(a){var i=e.lighten;i&&(a=l.Il.lighten(a,i));var r=e.brighten;r&&(a=l.Il.brighten(a,r)),y.addColorStop(t,"rgba("+a.r+","+a.g+","+a.b+","+n+")")}b++}))}return y}}]),n}(s.p);Object.defineProperty(f,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinearGradient"}),Object.defineProperty(f,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.p.classNames.concat([f.className])})},8193:function(e,t,n){n.d(t,{Chord:function(){return de},ChordDirected:function(){return ve},ChordLink:function(){return he},ChordLinkDirected:function(){return ge},ChordNodes:function(){return le},ChordNonRibbon:function(){return ye},Flow:function(){return Z},FlowLink:function(){return ce},FlowNode:function(){return ae},FlowNodes:function(){return ie},Sankey:function(){return Ee},SankeyLink:function(){return me},SankeyNodes:function(){return be}});var a=n(7853),i=n(4531),r=n(6148),o=n(4474),s=n(3538),l=n(1020),u=n(8334),c=n(7166),h=n(5971),f=n(5113),d=n(565),g=n(3591),v=n(3102),y=n(4921),p=n(8180),b=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"setupDefaultRules",value:function(){(0,o.Z)((0,s.Z)(n.prototype),"setupDefaultRules",this).call(this);var e=this._root.interfaceColors,t=this.rule.bind(this);t("Flow").setAll({width:d.AQ,height:d.AQ,paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,hiddenSize:.05,minSize:0,minHiddenValue:0}),t("FlowNodes").setAll({colors:g.U.new(this._root,{}),legendLabelText:"{name}",legendValueText:"{sumOutgoing.formatNumber('#.#')}"}),t("FlowNode").setAll({setStateOnChildren:!0,cursorOverStyle:"pointer",toggleKey:"disabled"}),t("FlowNode").states.create("disabled",{}),t("FlowNode",["unknown"]).setAll({draggable:!1,opacity:0}),t("Label",["flow"]).states.create("disabled",{fill:e.get("disabled")}),t("RadialLabel",["flow","node"]).setAll({text:"{name}",populateText:!0}),t("FlowLink").setAll({fillStyle:"gradient",strokeStyle:"gradient"}),t("FlowLink",["source","unknown"]).setAll({}),t("FlowLink",["target","unknown"]).setAll({}),t("FlowNode").events.on("pointerover",(function(e){var t=e.target.dataItem;if(t){var n=t.get("outgoingLinks");n&&y.S6(n,(function(e){var t=e.get("link");t.hover(),t.hideTooltip()}));var a=t.get("incomingLinks");a&&y.S6(a,(function(e){var t=e.get("link");t.hover(),t.hideTooltip()}))}var i=t.get("slice")||t.get("rectangle");i&&i.get("tooltipText")&&i.showTooltip()})),t("FlowNode").events.on("pointerout",(function(e){var t=e.target.dataItem;if(t){var n=t.get("outgoingLinks");n&&y.S6(n,(function(e){e.get("link").unhover()}));var a=t.get("incomingLinks");a&&y.S6(a,(function(e){e.get("link").unhover()}))}})),t("Sankey").setAll({orientation:"horizontal",nodeAlign:"justify",linkTension:.5,nodePadding:10,nodeWidth:10}),t("RoundedRectangle",["sankey","node","shape"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),t("RoundedRectangle",["shape"]).states.create("disabled",{fill:e.get("disabled")}),t("SankeyLink").setAll({controlPointDistance:.2}),t("FlowNode",["sankey"]).setAll({draggable:!0});var a=t("Graphics",["sankey","link"]);a.setAll({fillOpacity:.2,strokeOpacity:0,interactive:!0,tooltipText:"{sourceId} - {targetId}: {value}"}),(0,v.v)(a,"fill",e,"grid"),t("Graphics",["sankey","link"]).states.create("hover",{fillOpacity:.5}),t("Label",["sankey","node"]).setAll({text:"{name}",populateText:!0}),t("Label",["sankey","horizontal"]).setAll({y:d.CI,centerY:d.CI,paddingLeft:15}),t("Label",["sankey","vertical"]).setAll({x:d.CI,centerX:d.CI,paddingTop:15}),t("Chord").setAll({radius:(0,d.aQ)(90),nodeWidth:10,padAngle:1,startAngle:0,sort:"none"}),t("ChordDirected").setAll({linkHeadRadius:10}),t("ChordNodes").setAll({x:d.CI,y:d.CI}),t("FlowNode",["chord"]).setAll({draggable:!0}),t("ChordLink").setAll({sourceRadius:d.AQ,targetRadius:d.AQ,fillStyle:"solid",strokeStyle:"solid",tooltipText:"{sourceId} - {targetId}: {value}"}),t("Slice",["chord","node","shape"]).setAll({cornerRadius:0}),t("Slice",["shape"]).states.create("disabled",{fill:e.get("disabled")}),t("RadialLabel",["chord","node"]).setAll({radius:5,textType:"circular"}),t("ChordLinkDirected").setAll({headRadius:10});var i=t("Graphics",["chord","link","shape"]);i.setAll({fillOpacity:.2,strokeOpacity:0,interactive:!0}),(0,v.v)(i,"fill",e,"grid"),(0,v.v)(i,"stroke",e,"grid"),t("Graphics",["chord","link","shape"]).states.create("hover",{fillOpacity:.5}),t("ChordNonRibbon").setAll({linkType:"curve"}),t("ChordLink",["basic"]).setAll({fillStyle:"none",strokeStyle:"source"}),t("Graphics",["chord","link","shape","basic"]).setAll({strokeOpacity:.4}),t("Graphics",["chord","link","shape","basic"]).states.create("hover",{strokeWidth:2,strokeOpacity:1}),t("ArcDiagram").setAll({orientation:"horizontal",nodePadding:5,minRadius:5,radiusKey:"sum",animationEasing:p.C0(p.T7)}),t("ArcDiagramNodes",["horizontal"]).setAll({y:d.AQ,centerY:d.AQ}),t("ArcDiagramNodes",["vertical"]).setAll({centerX:0}),t("Circle",["arcdiagram","node","shape"]).setAll({tooltipText:"{name}: {sum}"}),t("Circle",["arcdiagram","node","shape"]).states.create("disabled",{fill:e.get("disabled")});var r=t("ArcDiagramLink",["link","shape"]);r.setAll({strokeOpacity:.15,strokeStyle:"solid",fillStyle:"none",isMeasured:!1}),(0,v.v)(r,"stroke",e,"grid"),t("ArcDiagramLink",["link","shape"]).states.create("hover",{strokeOpacity:1}),t("Label",["arcdiagram","node"]).setAll({text:"{name}",populateText:!0}),t("Label",["arcdiagram","horizontal"]).setAll({y:0,centerY:d.CI,centerX:d.AQ,rotation:-90}),t("Label",["arcdiagram","vertical"]).setAll({centerY:d.CI,centerX:d.AQ,paddingRight:15})}}]),n}(f.Q),m=n(3792),k=n(7919),_=n(4012),w=n(6683),Z=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"linksContainer",{enumerable:!0,configurable:!0,writable:!0,value:e.children.push(k.W.new(e._root,{}))}),Object.defineProperty((0,r.Z)(e),"_nodesData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,r.Z)(e),"_linksData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,r.Z)(e),"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,r.Z)(e),"_nodesDataSet",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,r.Z)(e),"_linksByIndex",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}return(0,i.Z)(n,[{key:"_afterNew",value:function(){this._defaultThemes.push(b.new(this._root)),this.fields.push("disabled","sourceId","targetId"),this.nodes&&(this.nodes.flow=this),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this),this.children.push(this.bulletsContainer)}},{key:"processDataItem",value:function(e){(0,o.Z)((0,s.Z)(n.prototype),"processDataItem",this).call(this,e);var t=this.nodes;if(t){var a=!1,i=e.get("sourceId"),r=t.getDataItemById(i);r||(null==i&&(i="undefined"+this._index,this._index++,a=!0),t.data.push({id:i,unknown:a}),r=t.getDataItemById(i),a||r.set("name",i)),a=!1;var l=e.get("targetId"),u=t.getDataItemById(l);u||(null==l&&(l="undefined"+this._index,this._index++,a=!0),t.data.push({id:l,unknown:a}),u=t.getDataItemById(l),a||u.set("name",l)),r&&(e.set("source",r),t.addOutgoingLink(r,e)),u&&(e.set("target",u),t.addincomingLink(u,e)),e.set("link",this.makeLink(e));var c=this.nodes.dataItems.indexOf(r),h=this.nodes.dataItems.indexOf(u);this._linksByIndex[c+"_"+h]=e,r.get("unknown")&&(u&&r.set("fill",u.get("fill")),e.get("link").set("fillStyle","gradient")),u.get("unknown")&&(r&&u.set("fill",r.get("fill")),e.get("link").set("fillStyle","gradient")),this._updateLinkColor(e)}}},{key:"_onDataClear",value:function(){this.nodes._userDataSet||(this.nodes.data.setAll([]),this.nodes._userDataSet=!1)}},{key:"_prepareChildren",value:function(){var e=this;(0,o.Z)((0,s.Z)(n.prototype),"_prepareChildren",this).call(this);var t=1/0,a=-1/0,i=0;if(this._valuesDirty){this._nodesData=[];var r=this.nodes;r&&y.S6(r.dataItems,(function(t){var n=t.get("d3SankeyNode");e._nodesData.push(n);var a=t.get("incomingLinks"),i=0,o=0;a&&y.S6(a,(function(e){var t=e.get("value"),n=e.get("valueWorking");i+=t,o+=n})),t.set("sumIncoming",i),t.set("sumIncomingWorking",o);var s=t.get("outgoingLinks"),l=0,u=0;s&&y.S6(s,(function(e){var t=e.get("value"),n=e.get("valueWorking");l+=t,u+=n})),t.set("sumOutgoing",l),t.set("sumOutgoingWorking",u),t.set("sum",i+l),t.set("sumWorking",o+u),r.updateLegendValue(t)})),this._linksData=[],y.S6(this.dataItems,(function(e){var n=e.get("value");w.hj(n)&&(n<t&&(t=n),n>a&&(a=n),i+=n)})),y.S6(this.dataItems,(function(t){var n=t.get("value");if(w.hj(n)){var a=t.get("valueWorking"),r=e.get("minSize",0);r>0&&a<r*i&&(a=r*i);var o={source:t.get("source").get("d3SankeyNode"),target:t.get("target").get("d3SankeyNode"),value:a};t.setRaw("d3SankeyLink",o),e._linksData.push(o),e.updateLegendValue(t)}})),this.setPrivateRaw("valueHigh",a),this.setPrivateRaw("valueLow",t),this.setPrivateRaw("valueSum",i)}}},{key:"_updateLinkColor",value:function(e){var t=e.get("link"),n=t.get("fillStyle"),a=t.get("strokeStyle"),i=e.get("source"),r=e.get("target"),o=i.get("fill"),s=r.get("fill");switch(t.remove("fillGradient"),t.remove("strokeGradient"),n){case"solid":t._applyTemplates();break;case"source":t.set("fill",o);break;case"target":t.set("fill",s);break;case"gradient":var l=t._fillGradient;l||(l=_.o.new(this._root,{}));var u={color:o};i.get("unknown")&&(u.opacity=0);var c={color:s};r.get("unknown")&&(c.opacity=0),l.set("stops",[u,c]),t._fillGradient=l,t.set("fillGradient",l);break;case"none":t.set("fill",void 0)}switch(a){case"solid":t._applyTemplates();break;case"source":t.set("stroke",o);break;case"target":t.set("stroke",s);break;case"gradient":var h=t._strokeGradient;if(!h){h=_.o.new(this._root,{});var f={color:o};i.get("unknown")&&(f.opacity=0);var d={color:s};r.get("unknown")&&(d.opacity=0),h.set("stops",[f,d]),t._strokeGradient=h}t.set("strokeGradient",h);break;case"none":t.remove("stroke")}}},{key:"disposeDataItem",value:function(e){(0,o.Z)((0,s.Z)(n.prototype),"disposeDataItem",this).call(this,e);var t=e.get("link");t&&(this.links.removeValue(t),t.dispose())}},{key:"hideDataItem",value:function(e,t){var a=this,i=Object.create(null,{hideDataItem:{get:function(){return(0,o.Z)((0,s.Z)(n.prototype),"hideDataItem",a)}}});return(0,h.mG)(this,void 0,void 0,(0,c.Z)().mark((function n(){var a,r,o,s,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[i.hideDataItem.call(this,e,t)],r=this.states.create("hidden",{}),o="stateAnimationDuration",s="stateAnimationEasing",w.hj(t)||(t=r.get(o,this.get(o,0))),l=r.get(s,this.get(s)),a.push(e.animate({key:"valueWorking",to:Math.max(this.get("minHiddenValue",0),this.get("hiddenSize",0)*e.get("value")),duration:t,easing:l}).waitForStop()),e.get("link").hide(),n.next=11,Promise.all(a);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"showDataItem",value:function(e,t){var a=this,i=Object.create(null,{showDataItem:{get:function(){return(0,o.Z)((0,s.Z)(n.prototype),"showDataItem",a)}}});return(0,h.mG)(this,void 0,void 0,(0,c.Z)().mark((function n(){var a,r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[i.showDataItem.call(this,e,t)],w.hj(t)||(t=this.get("stateAnimationDuration",0)),r=this.get("stateAnimationEasing"),a.push(e.animate({key:"valueWorking",to:e.get("value"),duration:t,easing:r}).waitForStop()),e.get("link").show(),n.next=8,Promise.all(a);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"_positionBullet",value:function(e){var t=e.get("sprite");if(t){var n=t.dataItem;if(n){var a=n.get("link"),i=e.get("sprite");if(i){var r=a.getPoint(this._getBulletLocation(e));i.setAll({x:r.x,y:r.y}),e.get("autoRotate")&&i.set("rotation",r.angle+e.get("autoRotateAngle",0))}}}}},{key:"_getBulletLocation",value:function(e){return e.get("locationY",0)}}]),n}(m.F);Object.defineProperty(Z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Flow"}),Object.defineProperty(Z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:m.F.classNames.concat([Z.className])});var x=n(9472),A=Math.abs,N=Math.cos,P=Math.sin,O=Math.PI,L=O/2,I=2*O,D=Math.max,S=1e-12;function j(e,t){return Array.from({length:t-e},(function(t,n){return e+n}))}function C(e,t){var n=0,a=null,i=null,r=null;function o(o){var s,l=o.length,u=new Array(l),c=j(0,l),h=new Array(l*l),f=new Array(l),d=0;o=Float64Array.from({length:l*l},t?function(e,t){return o[t%l][t/l|0]}:function(e,t){return o[t/l|0][t%l]});for(var g=0;g<l;++g){for(var v=0,y=0;y<l;++y)v+=o[g*l+y]+e*o[y*l+g];d+=u[g]=v}d=D(0,I-n*l)/d,s=d?n:I/l;var p=0;a&&c.sort((function(e,t){return a(u[e],u[t])}));var b,m=(0,x.Z)(c);try{var k=function(){var t=b.value,n=p;if(e){var a=j(1+~l,l).filter((function(e){return e<0?o[~e*l+t]:o[t*l+e]}));i&&a.sort((function(e,n){return i(e<0?-o[~e*l+t]:o[t*l+e],n<0?-o[~n*l+t]:o[t*l+n])}));var r,c=(0,x.Z)(a);try{for(c.s();!(r=c.n()).done;){var g=r.value;if(g<0)(h[~g*l+t]||(h[~g*l+t]={source:null,target:null})).target={index:t,startAngle:p,endAngle:p+=o[~g*l+t]*d,value:o[~g*l+t]};else(h[t*l+g]||(h[t*l+g]={source:null,target:null})).source={index:t,startAngle:p,endAngle:p+=o[t*l+g]*d,value:o[t*l+g]}}}catch(Z){c.e(Z)}finally{c.f()}f[t]={index:t,startAngle:n,endAngle:p,value:u[t]}}else{var v=j(0,l).filter((function(e){return o[t*l+e]||o[e*l+t]}));i&&v.sort((function(e,n){return i(o[t*l+e],o[t*l+n])}));var y,m=(0,x.Z)(v);try{for(m.s();!(y=m.n()).done;){var k=y.value,_=void 0;if(t<k?(_=h[t*l+k]||(h[t*l+k]={source:null,target:null})).source={index:t,startAngle:p,endAngle:p+=o[t*l+k]*d,value:o[t*l+k]}:((_=h[k*l+t]||(h[k*l+t]={source:null,target:null})).target={index:t,startAngle:p,endAngle:p+=o[t*l+k]*d,value:o[t*l+k]},t===k&&(_.source=_.target)),_.source&&_.target&&_.source.value<_.target.value){var w=_.source;_.source=_.target,_.target=w}}}catch(Z){m.e(Z)}finally{m.f()}f[t]={index:t,startAngle:n,endAngle:p,value:u[t]}}p+=s};for(m.s();!(b=m.n()).done;)k()}catch(_){m.e(_)}finally{m.f()}return(h=Object.values(h)).groups=f,r?h.sort(r):h}return o.padAngle=function(e){return arguments.length?(n=D(0,e),o):n},o.sortGroups=function(e){return arguments.length?(a=e,o):a},o.sortSubgroups=function(e){return arguments.length?(i=e,o):i},o.sortChords=function(e){return arguments.length?(null==e?r=null:(t=e,r=function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)})._=e,o):r&&r._;var t},o}var T=n(8137),M=Array.prototype.slice;function G(e){return function(){return e}}function R(e){return e.source}function F(e){return e.target}function W(e){return e.radius}function Y(e){return e.startAngle}function B(e){return e.endAngle}function z(){return 0}function E(){return 10}function $(e){var t=R,n=F,a=W,i=W,r=Y,o=B,s=z,l=null;function u(){var u,c=t.apply(this,arguments),h=n.apply(this,arguments),f=s.apply(this,arguments)/2,d=M.call(arguments),g=+a.apply(this,(d[0]=c,d)),v=r.apply(this,d)-L,y=o.apply(this,d)-L,p=+i.apply(this,(d[0]=h,d)),b=r.apply(this,d)-L,m=o.apply(this,d)-L;if(l||(l=u=(0,T.ET)()),f>S&&(A(y-v)>2*f+S?y>v?(v+=f,y-=f):(v-=f,y+=f):v=y=(v+y)/2,A(m-b)>2*f+S?m>b?(b+=f,m-=f):(b-=f,m+=f):b=m=(b+m)/2),l.moveTo(g*N(v),g*P(v)),l.arc(0,0,g,v,y),v!==b||y!==m)if(e){var k=p-+e.apply(this,arguments),_=(b+m)/2;l.quadraticCurveTo(0,0,k*N(b),k*P(b)),l.lineTo(p*N(_),p*P(_)),l.lineTo(k*N(m),k*P(m))}else l.quadraticCurveTo(0,0,p*N(b),p*P(b)),l.arc(0,0,p,b,m);if(l.quadraticCurveTo(0,0,g*N(v),g*P(v)),l.closePath(),u)return l=null,u+""||null}return e&&(u.headRadius=function(t){return arguments.length?(e="function"===typeof t?t:G(+t),u):e}),u.radius=function(e){return arguments.length?(a=i="function"===typeof e?e:G(+e),u):a},u.sourceRadius=function(e){return arguments.length?(a="function"===typeof e?e:G(+e),u):a},u.targetRadius=function(e){return arguments.length?(i="function"===typeof e?e:G(+e),u):i},u.startAngle=function(e){return arguments.length?(r="function"===typeof e?e:G(+e),u):r},u.endAngle=function(e){return arguments.length?(o="function"===typeof e?e:G(+e),u):o},u.padAngle=function(e){return arguments.length?(s="function"===typeof e?e:G(+e),u):s},u.source=function(e){return arguments.length?(t=e,u):t},u.target=function(e){return arguments.length?(n=e,u):n},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u}function H(){return $()}function Q(){return $(E)}var V=n(1046),X=n(1929);n(76),Math.abs,Math.max,Math.min;function q(e){return[+e[0],+e[1]]}function K(e){return[q(e[0]),q(e[1])]}["w","e"].map(J),["n","s"].map(J),["n","w","e","s","nw","ne","sw","se"].map(J);function J(e){return{type:e}}function U(e,t,n){this.k=e,this.x=t,this.y=n}U.prototype={constructor:U,scale:function(e){return 1===e?this:new U(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new U(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new U(1,0,0);U.prototype;var ee=n(3454),te=n(1918),ne=n(6343),ae=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,i.Z)(n)}(k.W);Object.defineProperty(ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FlowNode"}),Object.defineProperty(ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:k.W.classNames.concat([ae.className])});var ie=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"labels",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return ne._._new(e._root,{themeTags:["flow"]},[e.labels.template])}))}),Object.defineProperty((0,r.Z)(e),"nodes",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return ae._new(e._root,{themeTags:["node"]},[e.nodes.template])}))}),Object.defineProperty((0,r.Z)(e),"_userDataSet",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,i.Z)(n,[{key:"_afterNew",value:function(){this.fields.push("unknown","name","fill"),this.set("idField","id"),this.set("nameField","id"),this.set("fillField","fill"),this.set("unknownField","unknown"),this.children.push(this.bulletsContainer),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this)}},{key:"_onDataClear",value:function(){var e=this.get("colors");e&&e.reset(),this._userDataSet=!0}},{key:"processDataItem",value:function(e){var t=this;if((0,o.Z)((0,s.Z)(n.prototype),"processDataItem",this).call(this,e),e.setRaw("d3SankeyNode",{name:e.get("id"),dataItem:e}),null==e.get("fill")){var a=this.get("colors");a&&e.setRaw("fill",a.next())}var i=this.makeNode(e);e.setRaw("node",i);var r=this.get("disabledField");if(r){var l=e.dataContext;l&&l[r]&&this.root.events.once("frameended",(function(){t.disableDataItem(e,0)}))}}},{key:"makeNode",value:function(e,t){var n=this,a=this.nodes.make();return this.nodes.push(a),t&&a.addTag(t),e.get("unknown")&&a.addTag("unknown"),this.children.push(a),a._setDataItem(e),a.series=this,a.events.on("click",(function(e){var t=e.target;if("disabled"==t.get("toggleKey")){var a=t.dataItem;a&&(a.isHidden()?n.enableDataItem(a):n.disableDataItem(a))}})),e.on("fill",(function(){n._updateNodeColor(e)})),e.set("node",a),a}},{key:"_updateNodeColor",value:function(e){}},{key:"disposeDataItem",value:function(e){(0,o.Z)((0,s.Z)(n.prototype),"disposeDataItem",this).call(this,e);var t=e.get("node");t&&(this.nodes.removeValue(t),t.dispose());var a=e.get("label");a&&(this.labels.removeValue(a),a.dispose())}},{key:"addincomingLink",value:function(e,t){var n=e.get("incomingLinks");n||(n=[],e.set("incomingLinks",n)),n.push(t)}},{key:"addOutgoingLink",value:function(e,t){var n=e.get("outgoingLinks");n||(n=[],e.set("outgoingLinks",n)),n.push(t)}},{key:"showDataItem",value:function(e,t){var a=this,i=Object.create(null,{showDataItem:{get:function(){return(0,o.Z)((0,s.Z)(n.prototype),"showDataItem",a)}}});return(0,h.mG)(this,void 0,void 0,(0,c.Z)().mark((function n(){var a,r,o,s,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[i.showDataItem.call(this,e,t)],(r=this.flow)&&((o=e.get("node"))&&o.show(),(s=e.get("label"))&&s.show(t),(l=e.get("outgoingLinks"))&&y.S6(l,(function(e){r.showDataItem(e,t)})),(l=e.get("incomingLinks"))&&y.S6(l,(function(e){r.showDataItem(e,t)}))),n.next=5,a;case 5:case"end":return n.stop()}}),n,this)})))}},{key:"hideDataItem",value:function(e,t){var a=this,i=Object.create(null,{hideDataItem:{get:function(){return(0,o.Z)((0,s.Z)(n.prototype),"hideDataItem",a)}}});return(0,h.mG)(this,void 0,void 0,(0,c.Z)().mark((function n(){var a,r,o,s,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[i.hideDataItem.call(this,e,t)],(r=this.flow)&&((o=e.get("node"))&&o.hide(),(s=e.get("label"))&&s.hide(t),(l=e.get("outgoingLinks"))&&y.S6(l,(function(e){r.hideDataItem(e,t)})),(l=e.get("incomingLinks"))&&y.S6(l,(function(e){r.hideDataItem(e,t)}))),n.next=5,a;case 5:case"end":return n.stop()}}),n,this)})))}},{key:"enableDataItem",value:function(e,t){var a=this,i=Object.create(null,{showDataItem:{get:function(){return(0,o.Z)((0,s.Z)(n.prototype),"showDataItem",a)}}});return(0,h.mG)(this,void 0,void 0,(0,c.Z)().mark((function n(){var a,r,o,s,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[i.showDataItem.call(this,e,t)],(r=this.flow)&&((o=e.get("node"))&&this.root.events.once("frameended",(function(){o.set("disabled",!1)})),(s=e.get("label"))&&s.set("disabled",!1),(l=e.get("outgoingLinks"))&&y.S6(l,(function(e){r.showDataItem(e,t)})),(l=e.get("incomingLinks"))&&y.S6(l,(function(e){r.showDataItem(e,t)}))),n.next=5,a;case 5:case"end":return n.stop()}}),n,this)})))}},{key:"disableDataItem",value:function(e,t){var a=this,i=Object.create(null,{hideDataItem:{get:function(){return(0,o.Z)((0,s.Z)(n.prototype),"hideDataItem",a)}}});return(0,h.mG)(this,void 0,void 0,(0,c.Z)().mark((function n(){var a,r,o,s,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[i.hideDataItem.call(this,e,t)],(r=this.flow)&&((o=e.get("node"))&&this.root.events.once("frameended",(function(){o.set("disabled",!0)})),(s=e.get("label"))&&s.set("disabled",!0),(l=e.get("outgoingLinks"))&&y.S6(l,(function(e){r.hideDataItem(e,t)})),(l=e.get("incomingLinks"))&&y.S6(l,(function(e){r.hideDataItem(e,t)}))),n.next=5,a;case 5:case"end":return n.stop()}}),n,this)})))}}]),n}(m.F);Object.defineProperty(ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FlowNodes"}),Object.defineProperty(ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:m.F.classNames.concat([ie.className])});var re=n(9827),oe=n(6377),se=n(3661),le=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"labels",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return oe.x._new(e._root,{},[e.labels.template])}))}),Object.defineProperty((0,r.Z)(e),"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,r.Z)(e),"_dAngle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,r.Z)(e),"slices",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return re.p._new(e._root,{themeTags:["shape"]},[e.slices.template])}))}),Object.defineProperty((0,r.Z)(e),"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:e.slices}),e}return(0,i.Z)(n,[{key:"makeNode",value:function(e){var t=this,a=(0,o.Z)((0,s.Z)(n.prototype),"makeNode",this).call(this,e,"chord"),i=a.children.insertIndex(0,this.slices.make());e.set("slice",i),i._setSoft("fill",e.get("fill"));var r=this.labels.make();return this.labels.push(r),r.addTag("flow"),r.addTag("chord"),r.addTag("node"),a.children.push(r),e.set("label",r),a.events.on("dragstart",(function(e){var n=t.toLocal(e.point),a=se._O({x:0,y:0},n);t.flow&&(t._dAngle=t.flow.get("startAngle",0)-a)})),a.events.on("dragged",(function(e){var n=t.toLocal(e.point),i=se._O({x:0,y:0},n);a.setAll({x:0,y:0}),t.flow&&t.flow.set("startAngle",i+t._dAngle)})),r._setDataItem(e),i._setDataItem(e),a}},{key:"_positionBullet",value:function(e){var t=e.get("sprite");if(t){var n=t.dataItem;if(n){var a=e.get("sprite");if(a){var i=n.get("slice"),r=e.get("locationX",.5),o=e.get("locationY",.5);if(i){var s=i.get("radius",0),l=i.get("innerRadius",0),u=l+(s-l)*o,c=i.get("startAngle",0)+i.get("arc",0)*r;a.setAll({x:u*se.mC(c),y:u*se.O$(c)})}}}}}},{key:"_updateNodeColor",value:function(e){var t=e.get("slice");t&&t.set("fill",e.get("fill"))}},{key:"disposeDataItem",value:function(e){(0,o.Z)((0,s.Z)(n.prototype),"disposeDataItem",this).call(this,e);var t=e.get("slice");t&&(this.slices.removeValue(t),t.dispose())}}]),n}(ie);Object.defineProperty(le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordNodes"}),Object.defineProperty(le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([le.className])});var ue=n(5368),ce=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,r.Z)(e),"_fillGradient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,r.Z)(e),"_strokeGradient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,i.Z)(n,[{key:"_changed",value:function(){if((0,o.Z)((0,s.Z)(n.prototype),"_changed",this).call(this),this.isDirty("fillStyle")){var e=this.series,t=this.dataItem;e&&t&&e._updateLinkColor(t)}}},{key:"_getTooltipPoint",value:function(){var e=this.get("tooltipY"),t=.5;return e instanceof d.gG&&(t=e.value),this.getPoint(t)}}]),n}(ue.T);Object.defineProperty(ce,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FlowLink"}),Object.defineProperty(ce,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ue.T.classNames.concat([ce.className])});var he=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"_p0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,r.Z)(e),"_p1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,r.Z)(e),"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,i.Z)(n,[{key:"getPoint",value:function(e){if(this._p0&&this._p1){if("line"===this._type){var t=se.Zb(this._p0,this._p1,e);return{x:t.x,y:t.y,angle:se._O(this._p0,this._p1)}}var n=se.YH(this._p0,this._p1,{x:0,y:0},Math.max(0,e-.01)),a=se.YH(this._p0,this._p1,{x:0,y:0},Math.min(1,e+.01)),i=se.YH(this._p0,this._p1,{x:0,y:0},e);return{x:i.x,y:i.y,angle:se._O(n,a)}}return{x:0,y:0,angle:0}}}]),n}(ce);Object.defineProperty(he,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordLink"}),Object.defineProperty(he,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ce.classNames.concat([he.className])});var fe=n(4628),de=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"links",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return he._new(e._root,{themeTags:["link","shape"]},[e.links.template])}))}),Object.defineProperty((0,r.Z)(e),"nodes",{enumerable:!0,configurable:!0,writable:!0,value:e.children.push(le.new(e._root,{}))}),Object.defineProperty((0,r.Z)(e),"_d3chord",{enumerable:!0,configurable:!0,writable:!0,value:C(!1,!1)}),Object.defineProperty((0,r.Z)(e),"_chordLayout",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,r.Z)(e),"_ribbon",{enumerable:!0,configurable:!0,writable:!0,value:H()}),e}return(0,i.Z)(n,[{key:"_afterNew",value:function(){this._settings.themeTags=fe.Fy(this._settings.themeTags,["chord"]),this.linksContainer.setAll({x:d.CI,y:d.CI}),this.bulletsContainer.setAll({x:d.CI,y:d.CI}),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this)}},{key:"_fixRibbon",value:function(e){var t=this;e.startAngle((function(e){return e.startAngle+t.get("startAngle",0)*se.sE+Math.PI/2})),e.endAngle((function(e){return e.endAngle+t.get("startAngle",0)*se.sE+Math.PI/2}))}},{key:"makeLink",value:function(e){var t=this.linksContainer.children.push(this.links.make());return this.links.push(t),t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}},{key:"_makeMatrix",value:function(){var e=this,t=[];return y.S6(this.nodes.dataItems,(function(n){var a=[];t.push(a);var i=n.get("outgoingLinks");y.S6(e.nodes.dataItems,(function(t){var n=0;i&&y.S6(i,(function(a){a.get("target")===t&&(n=a.get("valueWorking"));var i=e.getPrivate("valueSum",0),r=e.get("minSize",0);n>0&&r>0&&n<i*r&&(n=i*r)})),a.push(n)}))})),t}},{key:"_prepareChildren",value:function(){var e=this;(0,o.Z)((0,s.Z)(n.prototype),"_prepareChildren",this).call(this),this._fixRibbon(this._ribbon);var t=!1;if(this._valuesDirty||this._sizeDirty||this.isDirty("padAngle")||this.isDirty("startAngle")){var a=this._makeMatrix();this._d3chord.padAngle(this.get("padAngle",0)*se.sE);var i=this.get("sort");"ascending"===i?this._d3chord.sortGroups(V.Z):"descending"===i&&this._d3chord.sortGroups(X.Z),this._chordLayout=this._d3chord(a),t=!0}if(t||this.isDirty("radius")||this.isDirty("nodeWidth")){var r=fe.Iy(this.get("radius",0),Math.min(this.innerWidth(),this.innerHeight()))/2,l=0,u=this.get("startAngle",0),c=this.get("nodeWidth",0);y.S6(this.nodes.dataItems,(function(t){var n=t.get("slice"),a=e._chordLayout.groups[l],i=a.startAngle*se.v4+u,o=a.endAngle*se.v4+u;n.setAll({radius:r,innerRadius:r-c,startAngle:i,arc:o-i});var s=t.get("label");s.setAll({labelAngle:i+(o-i)/2}),s.setPrivate("radius",r),s.setPrivate("innerRadius",.1),l++}));var h=r-this.get("nodeWidth",0);y.S6(this._chordLayout,(function(t){var n=e._linksByIndex[t.source.index+"_"+t.target.index];if(n||(n=e._linksByIndex[t.target.index+"_"+t.source.index]),n){var a=n.get("link");e._getLinkPoints(a,h,t),e._updateLink(e._ribbon,a,h,t)}}))}}},{key:"_getLinkPoints",value:function(e,t,n){var a=n.source,i=n.target,r=this.get("startAngle",0)*se.sE;if(a&&i){var o=a.startAngle,s=o+(a.endAngle-o)/2+r,l=i.startAngle,u=l+(i.endAngle-l)/2+r;e._p0={x:t*Math.cos(s),y:t*Math.sin(s)},e._p1={x:t*Math.cos(u),y:t*Math.sin(u)}}}},{key:"_updateLink",value:function(e,t,n,a){a&&(e.sourceRadius(fe.Iy(t.get("sourceRadius",d.AQ),n)),e.targetRadius(fe.Iy(t.get("targetRadius",d.AQ),n)),t.set("draw",(function(t){e.context(t),e(a)})))}}]),n}(Z);Object.defineProperty(de,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chord"}),Object.defineProperty(de,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Z.classNames.concat([de.className])});var ge=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"_afterNew",value:function(){this._settings.themeTags=fe.Fy(this._settings.themeTags,["chord","link","directed"]),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this)}}]),n}(he);Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordLinkDirected"}),Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:he.classNames.concat([ge.className])});var ve=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"_d3chord",{enumerable:!0,configurable:!0,writable:!0,value:C(!0,!1)}),Object.defineProperty((0,r.Z)(e),"_ribbonArrow",{enumerable:!0,configurable:!0,writable:!0,value:Q()}),Object.defineProperty((0,r.Z)(e),"links",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return ge._new(e._root,{themeTags:["link","shape"]},[e.links.template])}))}),e}return(0,i.Z)(n,[{key:"makeLink",value:function(e){var t=this.linksContainer.children.push(this.links.make());return t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}},{key:"_afterNew",value:function(){this._settings.themeTags=fe.Fy(this._settings.themeTags,["directed"]),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this),this._markDirtyKey("linkHeadRadius")}},{key:"_prepareChildren",value:function(){var e="linkHeadRadius";if(this.isDirty(e)){var t=this.get(e);if(null==t)this._ribbon=H();else{var a=Q();a.headRadius(t),this._ribbon=a}}(0,o.Z)((0,s.Z)(n.prototype),"_prepareChildren",this).call(this)}}]),n}(de);Object.defineProperty(ve,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordDirected"}),Object.defineProperty(ve,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:de.classNames.concat([ve.className])});var ye=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"_afterNew",value:function(){this._settings.themeTags=fe.Fy(this._settings.themeTags,["chord","basic"]),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this)}},{key:"_makeMatrix",value:function(){var e=this,t=[];return y.S6(this.nodes.dataItems,(function(n){var a=[];t.push(a),y.S6(e.nodes.dataItems,(function(e){var t=1;n===e&&(t=0),a.push(t)}))})),t}},{key:"_updateLink",value:function(e,t,n,a){if(t._type=this.get("linkType"),a){var i=this.get("linkType");t.set("draw",(function(e){var n=t._p0,a=t._p1;n&&a&&(e.moveTo(n.x,n.y),"line"==i?e.lineTo(a.x,a.y):e.quadraticCurveTo(0,0,a.x,a.y))}))}}},{key:"_getLinkPoints",value:function(e,t,n){var a=e.get("source"),i=e.get("target");if(a&&i){var r=a.get("slice"),o=i.get("slice"),s=r.get("startAngle",0)+r.get("arc",0)/2,l=o.get("startAngle",0)+o.get("arc",0)/2;e._p0={x:t*se.mC(s),y:t*se.O$(s)},e._p1={x:t*se.mC(l),y:t*se.O$(l)}}}}]),n}(de);Object.defineProperty(ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordNonRibbon"}),Object.defineProperty(ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:de.classNames.concat([ye.className])});var pe=n(3258),be=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return pe.c._new(e._root,{themeTags:["shape"]},[e.rectangles.template])}))}),Object.defineProperty((0,r.Z)(e),"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,i.Z)(n,[{key:"makeNode",value:function(e){var t=this.flow,a=(0,o.Z)((0,s.Z)(n.prototype),"makeNode",this).call(this,e,"sankey"),i=a.children.insertIndex(0,this.rectangles.make());this.rectangles.push(i),i._setSoft("fill",e.get("fill")),e.set("rectangle",i),a.events.on("dragged",(function(){var e=a.dataItem.get("d3SankeyNode");e&&t&&("horizontal"==t.get("orientation")?(e.x0=a.x(),e.y0=a.y()):(e.x0=a.y(),e.y0=a.x()),t.updateSankey())}));var r=this.labels.make();return this.labels.push(r),t&&r.addTag(t.get("orientation","")),a.children.push(r),e.set("label",r),r._setDataItem(e),i._setDataItem(e),a}},{key:"_positionBullet",value:function(e){var t=e.get("sprite");if(t){var n=t.dataItem;if(n){var a=e.get("sprite");if(a){var i=n.get("rectangle"),r=n.get("node"),o=e.get("locationX",.5),s=e.get("locationY",.5);i&&a.setAll({x:r.x()+i.width()*o,y:r.y()+i.height()*s})}}}}},{key:"disposeDataItem",value:function(e){(0,o.Z)((0,s.Z)(n.prototype),"disposeDataItem",this).call(this,e);var t=e.get("rectangle");t&&(this.rectangles.removeValue(t),t.dispose())}},{key:"_updateNodeColor",value:function(e){var t=e.get("rectangle");t&&t.set("fill",e.get("fill"))}}]),n}(ie);Object.defineProperty(be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SankeyNodes"}),Object.defineProperty(be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([be.className])});var me=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"_svgPath",{enumerable:!0,configurable:!0,writable:!0,value:document.createElementNS("http://www.w3.org/2000/svg","path")}),Object.defineProperty((0,r.Z)(e),"_totalLength",{enumerable:!0,configurable:!0,writable:!0,value:0}),e}return(0,i.Z)(n,[{key:"_beforeChanged",value:function(){var e=this;if((0,o.Z)((0,s.Z)(n.prototype),"_beforeChanged",this).call(this),this.isDirty("source")){var t=this.get("source");if(t){var a=t.get("node");this._disposers.push(a.events.on("positionchanged",(function(){e.markDirty()})))}}if(this.isDirty("target")){var i=this.get("target");if(i){var r=i.get("node");this._disposers.push(r.events.on("positionchanged",(function(){e.markDirty()})))}}if(this.isPrivateDirty("orientation")){var l=this.series,u=this.dataItem;u&&l&&l._updateLinkColor(u)}var c,h,f=this.get("target"),d=this.get("source");if(d&&f){this._clear=!0,c=d.get("node"),h=f.get("node");var g=0,v=0,y=0,p=0,b=0,m=0,k=0,_=0,w=0,Z=0,x=0,A=0,N=0,P=0,O=0,L=0,I=0,D=0,S=this.dataItem;if(S){var j=S.get("d3SankeyLink");if(j){var C=j.width||0,T=this.getPrivate("orientation");if("vertical"==T){if(c&&(y=c.y()),h&&(p=h.y()),I=90,D=90,g=j.y0||0,v=j.y1||0,p<y){var M=[v,g];g=M[0],v=M[1];var G=[p,y];y=G[0],p=G[1]}d.get("unknown")&&(g=v,y+=(p-y)/2),f.get("unknown")&&(v=g,p=y+(p-y)/2),b=g-C/2,m=y,k=v-C/2,_=p,w=g+C/2,Z=v+C/2,x=y,A=p,N=g,P=v,O=y,L=p}else{if(c&&(g=c.x()),h&&(v=h.x()),y=j.y0||0,p=j.y1||0,v<g){var R=[v,g];g=R[0],v=R[1];var F=[p,y];y=F[0],p=F[1]}d.get("unknown")&&(y=p,g+=(v-g)/2),f.get("unknown")&&(p=y,v=g+(v-g)/2),b=g,m=y-C/2,k=v,_=p-C/2,w=g,Z=v,x=y+C/2,A=p+C/2,N=g,P=v,O=y,L=p}se.NM(b,3)==se.NM(k,3)&&(k+=.01),se.NM(m,3)==se.NM(_,3)&&(_+=.01),se.NM(w,3)==se.NM(Z,3)&&(Z+=.01),se.NM(x,3)==se.NM(A,3)&&(A+=.01);var W=this.get("controlPointDistance",.2),Y=b+(k-b)*(W=Math.min(.4999,W))*se.mC(I),B=m+(_-m)*W*se.O$(I),z=k-(k-b)*W*se.mC(D),E=_-(_-m)*W*se.O$(D),$=N+(P-N)*W*se.mC(I),H=O+(L-O)*W*se.O$(I),Q=P-(P-N)*W*se.mC(D),V=L-(L-O)*W*se.O$(D),X=se._O({x:Y,y:B},{x:z,y:E}),q=(C/se.mC(X)-C)/se.OR(X)*se.mC(I),K=(C/se.O$(X)-C)*se.OR(X)*se.O$(I),J=-q/2+w+(Z-w)*W*se.mC(I),U=-K/2+x+(A-x)*W*se.O$(I),ee=-q/2+Z-(Z-w)*W*se.mC(D),te=-K/2+A-(A-x)*W*se.O$(D);Y+=q/2,B+=K/2,z+=q/2,E+=K/2,"vertical"==T?(B=Math.min(_,Math.max(m+1,B)),U=Math.min(A,Math.max(x+1,U)),E=Math.max(m,Math.min(_-1,E)),te=Math.max(x,Math.min(A-1,te))):(Y=Math.min(k,Math.max(b+1,Y)),J=Math.min(Z,Math.max(w+1,J)),z=Math.max(b,Math.min(k-1,z)),ee=Math.max(w,Math.min(Z-1,ee)));var ne=[[b,m,w,x],[Y,B,J,U],[z,E,ee,te],[k,_,Z,A]];this.set("draw",(function(t){var n=e.series;n._fillGenerator.context(t),n._fillGenerator(ne)}));var ae=[[N,O],[$,H],[Q,V],[P,L]],ie=this.series._strokeGenerator(ae);ie&&(this._svgPath.setAttribute("d",ie),this._totalLength=this._svgPath.getTotalLength())}}}this.series&&this.dataItem&&this.series._positionBullets(this.dataItem)}},{key:"getPoint",value:function(e){if(this._svgPath&&this._svgPath.getAttribute("d")){var t=this._svgPath.getPointAtLength(e*this._totalLength-.1),n=this._svgPath.getPointAtLength(e*this._totalLength+.1),a=this.toGlobal(this._svgPath.getPointAtLength(e*this._totalLength));return{x:a.x,y:a.y,angle:se._O(t,n)}}return{x:0,y:0,angle:0}}},{key:"_getTooltipPoint",value:function(){return this.toLocal((0,o.Z)((0,s.Z)(n.prototype),"_getTooltipPoint",this).call(this))}}]),n}(ce);Object.defineProperty(me,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SankeyLink"}),Object.defineProperty(me,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ce.classNames.concat([me.className])});var ke=n(1890),_e=n(8680),we=n(6604),Ze=n(7820),xe=n(678);function Ae(e,t){var n=0;if(void 0===t){var a,i=(0,x.Z)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;(r=+r)&&(n+=r)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,l=(0,x.Z)(e);try{for(l.s();!(o=l.n()).done;){var u=o.value;(u=+t(u,++s,e))&&(n+=u)}}catch(c){l.e(c)}finally{l.f()}}return n}function Ne(e,t){var n;if(void 0===t){var a,i=(0,x.Z)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;null!=r&&(n<r||void 0===n&&r>=r)&&(n=r)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,l=(0,x.Z)(e);try{for(l.s();!(o=l.n()).done;){var u=o.value;null!=(u=t(u,++s,e))&&(n<u||void 0===n&&u>=u)&&(n=u)}}catch(c){l.e(c)}finally{l.f()}}return n}function Pe(e,t){var n;if(void 0===t){var a,i=(0,x.Z)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;null!=r&&(n>r||void 0===n&&r>=r)&&(n=r)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,l=(0,x.Z)(e);try{for(l.s();!(o=l.n()).done;){var u=o.value;null!=(u=t(u,++s,e))&&(n>u||void 0===n&&u>=u)&&(n=u)}}catch(c){l.e(c)}finally{l.f()}}return n}function Oe(e){return e.target.depth}function Le(e){return e.depth}function Ie(e,t){return t-1-e.height}function De(e,t){return e.sourceLinks.length?e.depth:t-1}function Se(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Pe(e.sourceLinks,Oe)-1:0}function je(e){return function(){return e}}function Ce(e,t){return Me(e.source,t.source)||e.index-t.index}function Te(e,t){return Me(e.target,t.target)||e.index-t.index}function Me(e,t){return e.y0-t.y0}function Ge(e){return e.value}function Re(e){return e.index}function Fe(e){return e.nodes}function We(e){return e.links}function Ye(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Be(e){var t,n=e.nodes,a=(0,x.Z)(n);try{for(a.s();!(t=a.n()).done;){var i,r=t.value,o=r.y0,s=o,l=(0,x.Z)(r.sourceLinks);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.y0=o+u.width/2,o+=u.width}}catch(d){l.e(d)}finally{l.f()}var c,h=(0,x.Z)(r.targetLinks);try{for(h.s();!(c=h.n()).done;){var f=c.value;f.y1=s+f.width/2,s+=f.width}}catch(d){h.e(d)}finally{h.f()}}}catch(d){a.e(d)}finally{a.f()}}function ze(){var e,t,n,a=0,i=0,r=1,o=1,s=24,l=8,u=Re,c=De,h=Fe,f=We,d=6;function g(){var g={nodes:h.apply(null,arguments),links:f.apply(null,arguments)};return function(e){var t,a=e.nodes,i=e.links,r=(0,x.Z)(a.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,xe.Z)(t.value,2),s=o[0],l=o[1];l.index=s,l.sourceLinks=[],l.targetLinks=[]}}catch(Z){r.e(Z)}finally{r.f()}var c,h=new Map(a.map((function(e,t){return[u(e,t,a),e]}))),f=(0,x.Z)(i.entries());try{for(f.s();!(c=f.n()).done;){var d=(0,xe.Z)(c.value,2),g=d[0],v=d[1];v.index=g;var y=v.source,p=v.target;"object"!==typeof y&&(y=v.source=Ye(h,y)),"object"!==typeof p&&(p=v.target=Ye(h,p)),y.sourceLinks.push(v),p.targetLinks.push(v)}}catch(Z){f.e(Z)}finally{f.f()}if(null!=n){var b,m=(0,x.Z)(a);try{for(m.s();!(b=m.n()).done;){var k=b.value,_=k.sourceLinks,w=k.targetLinks;_.sort(n),w.sort(n)}}catch(Z){m.e(Z)}finally{m.f()}}}(g),function(e){var t,n=e.nodes,a=(0,x.Z)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.value=void 0===i.fixedValue?Math.max(Ae(i.sourceLinks,Ge),Ae(i.targetLinks,Ge)):i.fixedValue}}catch(r){a.e(r)}finally{a.f()}}(g),function(e){var t=e.nodes,n=t.length,a=new Set(t),i=new Set,r=0;for(;a.size;){var o,s=(0,x.Z)(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.depth=r;var u,c=(0,x.Z)(l.sourceLinks);try{for(c.s();!(u=c.n()).done;){var h=u.value.target;i.add(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){s.e(f)}finally{s.f()}if(++r>n)throw new Error("circular link");a=i,i=new Set}}(g),function(e){var t=e.nodes,n=t.length,a=new Set(t),i=new Set,r=0;for(;a.size;){var o,s=(0,x.Z)(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.height=r;var u,c=(0,x.Z)(l.targetLinks);try{for(c.s();!(u=c.n()).done;){var h=u.value.source;i.add(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){s.e(f)}finally{s.f()}if(++r>n)throw new Error("circular link");a=i,i=new Set}}(g),function(n){var u=function(e){var n,i=e.nodes,o=Ne(i,(function(e){return e.depth}))+1,l=(r-a-s)/(o-1),u=new Array(o),h=(0,x.Z)(i);try{for(h.s();!(n=h.n()).done;){var f=n.value,d=Math.max(0,Math.min(o-1,Math.floor(c.call(null,f,o))));f.layer=d,f.x0=a+d*l,f.x1=f.x0+s,u[d]?u[d].push(f):u[d]=[f]}}catch(y){h.e(y)}finally{h.f()}if(t){var g,v=(0,x.Z)(u);try{for(v.s();!(g=v.n()).done;){g.value.sort(t)}}catch(y){v.e(y)}finally{v.f()}}return u}(n);e=Math.min(l,(o-i)/(Ne(u,(function(e){return e.length}))-1)),function(t){var n,a=Pe(t,(function(t){return(o-i-(t.length-1)*e)/Ae(t,Ge)})),r=(0,x.Z)(t);try{for(r.s();!(n=r.n()).done;){var s,l=n.value,u=i,c=(0,x.Z)(l);try{for(c.s();!(s=c.n()).done;){var h=s.value;h.y0=u,h.y1=u+h.value*a,u=h.y1+e;var f,d=(0,x.Z)(h.sourceLinks);try{for(d.s();!(f=d.n()).done;){var g=f.value;g.width=g.value*a}}catch(p){d.e(p)}finally{d.f()}}}catch(p){c.e(p)}finally{c.f()}u=(o-u+e)/(l.length+1);for(var v=0;v<l.length;++v){var y=l[v];y.y0+=u*(v+1),y.y1+=u*(v+1)}_(l)}}catch(p){r.e(p)}finally{r.f()}}(u);for(var h=0;h<d;++h){var f=Math.pow(.99,h),g=Math.max(1-f,(h+1)/d);y(u,f,g),v(u,f,g)}}(g),Be(g),g}function v(e,n,a){for(var i=1,r=e.length;i<r;++i){var o,s=e[i],l=(0,x.Z)(s);try{for(l.s();!(o=l.n()).done;){var u,c=o.value,h=0,f=0,d=(0,x.Z)(c.targetLinks);try{for(d.s();!(u=d.n()).done;){var g=u.value,v=g.source,y=g.value*(c.layer-v.layer);h+=w(v,c)*y,f+=y}}catch(m){d.e(m)}finally{d.f()}if(f>0){var b=(h/f-c.y0)*n;c.y0+=b,c.y1+=b,k(c)}}}catch(m){l.e(m)}finally{l.f()}void 0===t&&s.sort(Me),p(s,a)}}function y(e,n,a){for(var i=e.length-2;i>=0;--i){var r,o=e[i],s=(0,x.Z)(o);try{for(s.s();!(r=s.n()).done;){var l,u=r.value,c=0,h=0,f=(0,x.Z)(u.sourceLinks);try{for(f.s();!(l=f.n()).done;){var d=l.value,g=d.target,v=d.value*(g.layer-u.layer);c+=Z(u,g)*v,h+=v}}catch(b){f.e(b)}finally{f.f()}if(h>0){var y=(c/h-u.y0)*n;u.y0+=y,u.y1+=y,k(u)}}}catch(b){s.e(b)}finally{s.f()}void 0===t&&o.sort(Me),p(o,a)}}function p(t,n){var a=t.length>>1,r=t[a];m(t,r.y0-e,a-1,n),b(t,r.y1+e,a+1,n),m(t,o,t.length-1,n),b(t,i,0,n)}function b(t,n,a,i){for(;a<t.length;++a){var r=t[a],o=(n-r.y0)*i;o>1e-6&&(r.y0+=o,r.y1+=o),n=r.y1+e}}function m(t,n,a,i){for(;a>=0;--a){var r=t[a],o=(r.y1-n)*i;o>1e-6&&(r.y0-=o,r.y1-=o),n=r.y0-e}}function k(e){var t=e.sourceLinks,a=e.targetLinks;if(void 0===n){var i,r=(0,x.Z)(a);try{for(r.s();!(i=r.n()).done;){i.value.source.sourceLinks.sort(Te)}}catch(l){r.e(l)}finally{r.f()}var o,s=(0,x.Z)(t);try{for(s.s();!(o=s.n()).done;){o.value.target.targetLinks.sort(Ce)}}catch(l){s.e(l)}finally{s.f()}}}function _(e){if(void 0===n){var t,a=(0,x.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=i.sourceLinks,o=i.targetLinks;r.sort(Te),o.sort(Ce)}}catch(s){a.e(s)}finally{a.f()}}}function w(t,n){var a,i=t.y0-(t.sourceLinks.length-1)*e/2,r=(0,x.Z)(t.sourceLinks);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=o.target,l=o.width;if(s===n)break;i+=l+e}}catch(g){r.e(g)}finally{r.f()}var u,c=(0,x.Z)(n.targetLinks);try{for(c.s();!(u=c.n()).done;){var h=u.value,f=h.source,d=h.width;if(f===t)break;i-=d}}catch(g){c.e(g)}finally{c.f()}return i}function Z(t,n){var a,i=n.y0-(n.targetLinks.length-1)*e/2,r=(0,x.Z)(n.targetLinks);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=o.source,l=o.width;if(s===t)break;i+=l+e}}catch(g){r.e(g)}finally{r.f()}var u,c=(0,x.Z)(t.sourceLinks);try{for(c.s();!(u=c.n()).done;){var h=u.value,f=h.target,d=h.width;if(f===n)break;i-=d}}catch(g){c.e(g)}finally{c.f()}return i}return g.update=function(e){return Be(e),e},g.nodeId=function(e){return arguments.length?(u="function"===typeof e?e:je(e),g):u},g.nodeAlign=function(e){return arguments.length?(c="function"===typeof e?e:je(e),g):c},g.nodeSort=function(e){return arguments.length?(t=e,g):t},g.nodeWidth=function(e){return arguments.length?(s=+e,g):s},g.nodePadding=function(t){return arguments.length?(l=e=+t,g):l},g.nodes=function(e){return arguments.length?(h="function"===typeof e?e:je(e),g):h},g.links=function(e){return arguments.length?(f="function"===typeof e?e:je(e),g):f},g.linkSort=function(e){return arguments.length?(n=e,g):n},g.size=function(e){return arguments.length?(a=i=0,r=+e[0],o=+e[1],g):[r-a,o-i]},g.extent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],i=+e[0][1],o=+e[1][1],g):[[a,i],[r,o]]},g.iterations=function(e){return arguments.length?(d=+e,g):d},g}var Ee=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,r.Z)(e),"links",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),(function(){return me._new(e._root,{themeTags:["link","shape"]},[e.links.template])}))}),Object.defineProperty((0,r.Z)(e),"nodes",{enumerable:!0,configurable:!0,writable:!0,value:e.children.push(be.new(e._root,{}))}),Object.defineProperty((0,r.Z)(e),"_d3Sankey",{enumerable:!0,configurable:!0,writable:!0,value:ze()}),Object.defineProperty((0,r.Z)(e),"_d3Graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,r.Z)(e),"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:(0,ke.Z)()}),Object.defineProperty((0,r.Z)(e),"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:(0,_e.Z)()}),e}return(0,i.Z)(n,[{key:"_afterNew",value:function(){this._settings.themeTags=fe.Fy(this._settings.themeTags,["sankey",this._settings.orientation||"horizontal"]),this._fillGenerator.y0((function(e){return e[3]})),this._fillGenerator.x0((function(e){return e[2]})),this._fillGenerator.y1((function(e){return e[1]})),this._fillGenerator.x1((function(e){return e[0]})),(0,o.Z)((0,s.Z)(n.prototype),"_afterNew",this).call(this)}},{key:"makeLink",value:function(e){var t=e.get("source"),n=e.get("target"),a=this.links.make();return t.get("unknown")&&(a.addTag("source"),a.addTag("unknown")),n.get("unknown")&&(a.addTag("target"),a.addTag("unknown")),this.linksContainer.children.push(a),a._setDataItem(e),a.set("source",t),a.set("target",n),a.series=this,this.links.push(a),a}},{key:"updateSankey",value:function(){var e=this,t=this._d3Graph;t&&(this._d3Sankey.update(t),y.S6(this.dataItems,(function(t){var n=t.get("link");n.setPrivate("orientation",e.get("orientation")),n.markDirty()})))}},{key:"_updateLinkColor",value:function(e){(0,o.Z)((0,s.Z)(n.prototype),"_updateLinkColor",this).call(this,e);var t=this.get("orientation"),a=e.get("link")._fillGradient,i=e.get("link")._strokeGradient;"vertical"==t?(a&&a.set("rotation",90),i&&i.set("rotation",90)):(a&&a.set("rotation",0),i&&i.set("rotation",0))}},{key:"_getBulletLocation",value:function(e){return"vertical"==this.get("orientation")?e.get("locationY",0):e.get("locationX",0)}},{key:"_prepareChildren",value:function(){var e=this;(0,o.Z)((0,s.Z)(n.prototype),"_prepareChildren",this).call(this);var t=!1;if("vertical"==this.get("orientation")&&(t=!0),this.isDirty("orientation")||this.isDirty("linkTension")){var a=this.get("linkTension",.5);t?(this._fillGenerator.curve((0,Ze.$)(a)),this._strokeGenerator.curve((0,Ze.$)(a))):(this._fillGenerator.curve((0,we.G)(a)),this._strokeGenerator.curve((0,we.G)(a)))}if((this._valuesDirty||this._sizeDirty||this.isDirty("nodePadding")||this.isDirty("nodeWidth")||this.isDirty("nodeAlign")||this.isDirty("nodeSort")||this.isDirty("orientation")||this.isDirty("linkTension")||this.isDirty("linkSort"))&&this._nodesData.length>0){var i=this._d3Sankey,r=this.innerWidth(),l=this.innerHeight();if(t){var u=[l,r];r=u[0],l=u[1]}switch(i.size([r,l]),i.nodePadding(this.get("nodePadding",10)),i.nodeWidth(this.get("nodeWidth",10)),i.nodeSort(this.get("nodeSort",null)),i.linkSort(this.get("linkSort")),this.get("nodeAlign")){case"right":i.nodeAlign(Ie);break;case"justify":i.nodeAlign(De);break;case"center":i.nodeAlign(Se);break;default:i.nodeAlign(Le)}this._d3Graph=i({nodes:this._nodesData,links:this._linksData}),y.S6(this.dataItems,(function(t){var n=t.get("link");n.setPrivate("orientation",e.get("orientation")),n.markDirty()}));var c=this._d3Graph;if(c){var h=c.nodes;y.S6(h,(function(e){var n,a,i,r,o=e.dataItem,s=o.get("node");(t?(n=e.y0,a=e.y1,i=e.x0,r=e.x1):(n=e.x0,a=e.x1,i=e.y0,r=e.y1),w.hj(n)&&w.hj(a)&&w.hj(i)&&w.hj(r))&&(s.setAll({x:n,y:i,width:a-n,height:r-i}),o.get("rectangle").setAll({width:a-n,height:r-i}))}))}}}}]),n}(Z);Object.defineProperty(Ee,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sankey"}),Object.defineProperty(Ee,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Z.classNames.concat([Ee.className])})}}]);
//# sourceMappingURL=json_flow.8a182ff9.chunk.js.map